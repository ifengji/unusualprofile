library(tidyverse)
d1 <- tibble::tribble(
   ~X,  ~Y,
  0.7,   -.5,
  0.8,   0,
  0.9,   0,
    0, 0.8,
    0, 0.9,
    0, 0.1
  ) %>% as.matrix()

d2 <- tibble::tribble(
   ~X,  ~Y,
  0.7,   0.5,
  0.9,   0,
  0.9, 0.6,
    0, 0.7,
    0, 0.8,
    0, 0.7
  ) %>% as.matrix()


diag((t(d1) %*% d2) / sqrt((t(d1) %*% d1) * (t(d2) %*% d2)))


cor(d1[,"Y"], d2[,"Y"])

x <- d1[,"X"]
y <- d2[,"X"]

sum(x * y) / sqrt(sum(x ^ 2) * sum(y ^ 2))
